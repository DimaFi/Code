\documentclass[a4paper,12pt]{article}
\usepackage[T2A]{fontenc}
\usepackage[english]{babel} % языковой пакет
\usepackage{graphicx} % для картинок
\usepackage{amsmath,amsfonts,amssymb} %математика
\usepackage{mathtools}
\usepackage{pgfplots} % Для построения графиков
\pgfplotsset{compat=1.18} % Совместимость с новой версией pgfplots


\begin{document}
\section*{Задание 1. Лабораторная 1}

Рассмотрим функцию: \( f(x) = 3x - x|x - 6| + 5 \).

1. Для \( x \geq 6 \):
\[
f(x) = -x^2 + 9x + 5.
\]
Это квадратичная функция, которая является унимодальной с максимумом в вершине:
\[
x_{\text{вершина}} = \frac{-9}{2(-1)} = 4.5.
\]

2. Для \( x < 6 \):
\[
f(x) = x^2 - 3x + 5.
\]
Это квадратичная функция, которая является унимодальной с минимумом в вершине:
\[
x_{\text{вершина}} = \frac{-(-3)}{2(1)} = 1.5.
\]

Таким образом, функция унимодальна на двух интервалах:
\begin{itemize}
    \item \( [1, 6) \), где она имеет минимум.
    \item \( [6, 10] \), где она имеет максимум.
\end{itemize}

\begin{center}
    \begin{tikzpicture}
        \begin{axis}[
            domain=1:10,
            samples=400,
            axis lines=middle,
            xlabel=$x$, ylabel={$f(x)$},
            legend pos=north west,
            grid=major,
            width=10cm, height=7cm,
            title={График функции $f(x)$},
            legend style={at={(1.05,1)}, anchor=north west, font=\small} % Move legend outside
        ]
        % For x >= 6
        \addplot[
            domain=6:10,
            thick, green,
        ] {-x^2 + 9*x + 5};
        \addlegendentry{$f(x) = -x^2 + 9x + 5$ for $x \geq 6$}
        
        % For x < 6
        \addplot[
            domain=1:6,
            thick, blue,
        ] {x^2 - 3*x + 5};
        \addlegendentry{$f(x) = x^2 - 3x + 5$ for $x < 6$}
        
        % Vertical line at x=6
        \addplot[dashed, thick] coordinates {(6, -10) (6, 30)};
        \addlegendentry{$x = 6$}
        
        % Min and max points
        \addplot[mark=*, red] coordinates {(1.5, 2.75)};
        \addlegendentry{Min at $x = 1.5$}
        
        \addplot[mark=*, purple] coordinates {(4.5, 25.25)};
        \addlegendentry{Max at $x = 4.5$}
        
        \end{axis}
    \end{tikzpicture}
    \end{center}

\end{document}
